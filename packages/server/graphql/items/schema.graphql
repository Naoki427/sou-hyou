enum FieldType { NUMBER SELECT COMMENT }
enum ItemType { FOLDER MEMO }

type Field { label: String!, type: FieldType!, value: JSON }
type Horse { name: String!, predictionMark: String!, fields: [Field!]! }

type Item {
  id: ID!
  type: ItemType!
  name: String!
  path: String!
  parent: ID
  ancestors: [ID!]!
  depth: Int!
  owner: ID!
  horses: [Horse!]
  createdAt: String
  updatedAt: String
}

input FieldInput { label: String!, type: FieldType!, value: JSON }
input HorseInput { name: String!, predictionMark: String!, fields: [FieldInput!] }
input CreateMemoInput { name: String!, parentId: ID, horses: [HorseInput!] }
input CreateFolderInput {
  name: String!
  parentId: ID
}

extend type Query {
  myItems(parentId: ID): [Item!]!
  item(id: ID!): Item
  itemByPath(path: String!): Item
  myRecentMemos(limit: Int = 20): [Item!]!
}

extend type Mutation {
  createMemo(input: CreateMemoInput!): Item!
}

extend type Mutation {
  createFolder(input: CreateFolderInput!): Item!
}