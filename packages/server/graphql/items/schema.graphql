enum FieldType { NUMBER SELECT COMMENT }
enum ItemType { FOLDER MEMO }
enum PredictionMark {
  HONMEI
  TAIKOU
  TANNANA
  RENSHITA
  HOSHI
  CHUUI
  KESHI
  MUZIRUSHI
}


type Field { label: String!, type: FieldType!, value: JSON }
type Horse { name: String!, predictionMark: String!, fields: [Field!]! }

type Item {
  id: ID!
  type: ItemType!
  name: String!
  path: String!
  parent: ID
  ancestors: [ID!]!
  depth: Int!
  owner: ID!
  horses: [Horse!]
  createdAt: String
  updatedAt: String
}

input HorseInput {
  name: String
  predictionMark: PredictionMark
  fields: [FieldInput!]
}
input FieldInput { label: String!, type: FieldType!, value: JSON }
input CreateMemoInput { name: String!, parentId: ID, horses: [HorseInput!] }
input CreateFolderInput {
  name: String!
  parentId: ID
}

extend type Query {
  myItems(parentId: ID): [Item!]!
  item(id: ID!): Item
  itemByPath(path: String!): Item
  myRecentMemos(limit: Int = 20): [Item!]!
}

extend type Mutation {
  createMemo(input: CreateMemoInput!): Item!
}

extend type Mutation {
  createFolder(input: CreateFolderInput!): Item!
}

extend type Mutation {
  setHorseProp(
    memoId: ID!
    index: Int!
    name: String
    predictionMark: PredictionMark
  ): Item!

  setHorseFieldValue(
    memoId: ID!
    index: Int!
    label: String!
    type: FieldType!
    value: JSON
  ): Item!
}